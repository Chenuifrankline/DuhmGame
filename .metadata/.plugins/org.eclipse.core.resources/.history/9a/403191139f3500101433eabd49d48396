package codegenerator.templates

import codegenerator.CodegenInterface

import codegenerator.Template
import org.eclipse.uml2.uml.AggregationKind
import org.eclipse.uml2.uml.Property
import javax.lang.model.type.PrimitiveType

class PropertyTemplate implements Template<Property> {
	
override generateCode(CodegenInterface it, Property umlProperty, String context) {

    var name = umlProperty.name
    var pointer = ""
    var upper = ""

    if (umlProperty.upper > 1) {
        upper = "[" + umlProperty.upper.toString + "]"
    } else if (umlProperty.upper == -1) {
        pointer = "*"
    }

    // Falls kein Typ vorhanden ist, verwende "void"
    var type = umlProperty.type !== null
        ? generate(umlProperty.type, "type")
        : "void"

    // Aggregation nur prüfen, wenn Typ vorhanden ist
    if (umlProperty.type !== null &&
        !(umlProperty.type instanceof PrimitiveType) &&
        umlProperty.aggregation == AggregationKind.COMPOSITE_LITERAL) {

        return '''«umlProperty.type.name» «name»«upper»;'''
    } else {
        return '''«type»«pointer» «name»«upper»;'''
    }
}
}